(function(e){e.fn.scrollfix=function(t){var n=e.extend({elements:function(){return this.clone().hide()},className:"scroll-fix",moveCurrent:!0},t),r=this,i=n.elements.apply(this,arguments),s=[],o=function(t){r.each(function(n){var r=e(this);r.is(t)||(s[n]={top:r.offset().top})})},u=function(t){r.each(function(n){var r=e(this);if(!r.is(":visible"))return;t.call(r,n,s[n],e(i.get(n)))})};o(),this.parent().append(i),e(window).on("updateScrollFix",o),e(window).on("scroll.scrollfix",function(t){var r=e(window).scrollTop(),s,o=function(){var e=s.outerHeight(!0),t=0;u(function(n,i,s){var o=this.offset().top-r,u=o-e;o>0&&o<e&&(t=u)}),s.css("top",t<0?t+"px":"0px")};u(function(e,t,i){t.top<r&&(s=i),t.top>=r&&i.hasClass(n.className)&&i.css("top","0").removeClass(n.className).hide()}),s&&!s.hasClass(n.className)&&(i.removeClass(n.className).hide(),s.addClass(n.className).show()),n.moveCurrent&&s&&o()})}})(jQuery),window.Rainbow=function(){function l(e,t,n,r){var i=e.getAttribute&&e.getAttribute(t)||0;if(!i){n=e.attributes;for(r=0;r<n.length;++r)if(n[r].nodeName===t)return n[r].nodeValue}return i}function c(e,t){e.className+=e.className?" "+t:t}function h(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1}function p(e){var t=l(e,"data-language")||l(e.parentNode,"data-language");if(!t){var n=/\blang(?:uage)?-(\w+)/,r=e.className.match(n)||e.parentNode.className.match(n);r&&(t=r[1])}return t}function d(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&(?![\w\#]+;)/g,"&amp;")}function v(e,t,n,r){return n>=e&&n<t?!0:r>e&&r<t}function m(e,t,n,r){return n==e&&r==t?!1:n<=e&&r>=t}function g(n,r){for(var s in t[i]){s=parseInt(s,10),m(s,t[i][s],n,r)&&(delete t[i][s],delete e[i][s]);if(v(s,t[i][s],n,r))return!0}return!1}function y(e,t){return'<span class="'+e.replace(/\./g," ")+(a?" "+a:"")+'">'+t+"</span>"}function b(e,t){var n=0,r;for(r=1;r<t;++r)e[r]&&(n+=e[r].length);return n}function w(n,r,s,u){var a=n.exec(s);if(!a)return u();++o,!r.name&&typeof r["matches"][0]=="string"&&(r.name=r.matches[0],delete r.matches[0]);var f=a[0],l=a.index,c=a[0].length+l,h=function(){var e=function(){w(n,r,s,u)};return o%100>0?e():setTimeout(e,0)};if(g(l,c))return h();var p=function(n){r.name&&(n=y(r.name,n)),e[i]||(e[i]={},t[i]={}),e[i][l]={replace:a[0],"with":n},t[i][l]=c,h()},d=T(r.matches),v=function(e,t,n){if(e>=t.length)return n(f);var i=function(){v(++e,t,n)},s=a[t[e]];if(!s)return i();var o=r.matches[t[e]],u=o.language,l=o.name&&o.matches?o.matches:o,c=function(n,r,s){f=x(b(a,t[e]),n,s?y(s,r):r,f),i()};if(u)return k(s,u,function(e){c(s,e)});if(typeof o=="string")return c(s,s,o);N(s,l.length?l:[l],function(e){c(s,e,o.matches?o.name:0)})};v(0,d,p)}function E(e){return r[e]}function S(e){var t=n[e]||[],r=n[s]||[];return E(e)?t:t.concat(r)}function x(e,t,n,r){var i=r.substr(e);return r.substr(0,e)+i.replace(t,n)}function T(e){var t=[],n,r;for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t.sort(function(e,t){return t-e})}function N(n,r,s){function o(r,u){if(u<r.length)return w(r[u].pattern,r[u],n,function(){o(r,++u)});C(n,function(n){delete e[i],delete t[i],--i,s(n)})}++i,o(r,0)}function C(t,n){function r(t,n,s,o){if(s<n.length){++u;var a=n[s],f=e[i][a];t=x(a,f.replace,f["with"],t);var l=function(){r(t,n,++s,o)};return u%250>0?l():setTimeout(l,0)}o(t)}var s=T(e[i]);r(t,s,0,n)}function k(e,t,n){var r=S(t);N(d(e),r,n)}function L(n,r,i){if(r<n.length){var s=n[r],o=p(s);return!h(s,"rainbow")&&o?(o=o.toLowerCase(),c(s,"rainbow"),k(s.innerHTML,o,function(u){s.innerHTML=u,e={},t={},f&&f(s,o),setTimeout(function(){L(n,++r,i)},0)})):L(n,++r,i)}i&&i()}function A(e,t){e=e&&typeof e.getElementsByTagName=="function"?e:document;var n=e.getElementsByTagName("pre"),r=e.getElementsByTagName("code"),i,s=[];for(i=0;i<r.length;++i)s.push(r[i]);for(i=0;i<n.length;++i)n[i].getElementsByTagName("code").length||s.push(n[i]);L(s,0,t)}var e={},t={},n={},r={},i=0,s=0,o=0,u=0,a,f;return{extend:function(e,t,i){arguments.length==1&&(t=e,e=s),r[e]=i,n[e]=t.concat(n[e]||[])},onHighlight:function(e){f=e},addClass:function(e){a=e},color:function(){if(typeof arguments[0]=="string")return k(arguments[0],arguments[1],arguments[2]);if(typeof arguments[0]=="function")return A(0,arguments[0]);A(arguments[0],arguments[1])}}}(),function(){if(window.addEventListener)return window.addEventListener("load",Rainbow.color,!1);window.attachEvent("onload",Rainbow.color)}(),Rainbow.onHighlight=Rainbow.onHighlight,Rainbow.addClass=Rainbow.addClass,Rainbow.extend("javascript",[{name:"selector",pattern:/(\s|^)\$(?=\.|\()/g},{name:"support",pattern:/\b(window|document)\b/g},{matches:{1:"support.property"},pattern:/\.(length|node(Name|Value))\b/g},{matches:{1:"support.function"},pattern:/(setTimeout|setInterval)(?=\()/g},{matches:{1:"support.method"},pattern:/\.(getAttribute|push|getElementById|getElementsByClassName|log|setTimeout|setInterval)(?=\()/g},{matches:{1:"support.tag.script",2:[{name:"string",pattern:/('|")(.*?)(\1)/g},{name:"entity.tag.script",pattern:/(\w+)/g}],3:"support.tag.script"},pattern:/(&lt;\/?)(script.*?)(&gt;)/g},{name:"string.regexp",matches:{1:"string.regexp.open",2:{name:"constant.regexp.escape",pattern:/\\(.){1}/g},3:"string.regexp.close",4:"string.regexp.modifier"},pattern:/(\/)(?!\*)(.+)(\/)([igm]{0,3})/g},{matches:{1:"storage",3:"entity.function"},pattern:/(var)?(\s|^)(.*)(?=\s?=\s?function\()/g},{matches:{1:"keyword",2:"entity.function"},pattern:/(new)\s+(.*)(?=\()/g},{name:"entity.function",pattern:/(\w+)(?=:\s{0,}function)/g}]);